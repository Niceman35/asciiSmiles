<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="initial-scale=1.0, width=1000">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="alternate icon" href="favicon.ico">
    <link rel="preload" as="font" type="font/ttf" href="DOSVGA.ttf" crossorigin="anonymous">
    <title>ASCII Smiles NFT mint page</title>
    <style>
        @font-face {
            font-family: DOS_VGA;
            src: url(DOSVGA.ttf);
        }
        body {
            font-family: DOS_VGA, monospace;
            font-size: 16px;
            line-height: 1;
            width: 1000px;
            background-color: #000080;
            color: #00e3f1;
        }
        pre {
            font-family: DOS_VGA, monospace;
            font-size: 16px;
        }
        pre span {
            color: #fafa02;
        }
        b {
            color: white;
            font-size: 16px;
            font-weight: normal;
        }

        a{
            text-decoration: none;
            color: white;
        }
        #divConnect {
            text-align: center;
        }
        #mintInfo, #MintFinished {
            display: none;
        }
        div#Mint {
            width: 600px;
            border: double 4px #00e3f1;
            padding: 16px 8px;
            margin: 16px 0;
        }

        div#blockchains {
            width: 800px;
            border: double 4px #00e3f1;
            padding: 16px 8px;
            margin: 16px auto;
            text-align: center;
        }
        div#blockchains span {
            cursor: pointer;
        }
        span#chainWrong {
            display: none;
            color: red;
        }
        div#blockchains span.active {
            color: white;
        }

        .AsciiButton {
            background-color: white;
            padding: 3px 30px;
            cursor: pointer;
            border: 0;
            color: #222;
            font-weight: bold;
            box-shadow: 8px 8px 0 #000;
        }
        .AsciiButton:hover {
            background-color: #f8fc50;
        }
        .AsciiButton:focus {
            background-color: #f8fc50;
        }
        .AsciiButton:active {
            background-color: #f8fc50;
            box-shadow: none;
            transform: translate(3px, 3px);
        }
        .numField {
            padding: 3px 5px;
            background-color: #00d6d6;
            border: none;
            width: 80px;
            color: #222;
            font-weight: bold;
        }
    </style>
    <script src="ethers.js" type="application/javascript" crossorigin="anonymous"></script>
</head>
<BODY>
<pre>
    <A href="index.html">[ HOME ]</A> <A href="mint.html">[ MINT ]</A> <A href="mycards.html">[ MY WALLET ]</A> <A href="roadmap.html">[ ROADMAP ]</A> <A href="https://discord.gg/ngNVt2R2s2">[ DISCORD ]</A> <A href="https://twitter.com/AsciiSmiles">[ Twitter ]</A>

    ░█████╗░░██████╗░█████╗░██╗██╗    ░██████╗███╗░░░███╗██╗██╗░░░░░███████╗░██████╗
    ██╔══██╗██╔════╝██╔══██╗██║██║    ██╔════╝████╗░████║██║██║░░░░░██╔════╝██╔════╝
    ███████║╚█████╗░██║░░╚═╝██║██║    ╚█████╗░██╔████╔██║██║██║░░░░░█████╗░░╚█████╗░
    ██╔══██║░╚═══██╗██║░░██╗██║██║    ░╚═══██╗██║╚██╔╝██║██║██║░░░░░██╔══╝░░░╚═══██╗
    ██║░░██║██████╔╝╚█████╔╝██║██║    ██████╔╝██║░╚═╝░██║██║███████╗███████╗██████╔╝
    ╚═╝░░╚═╝╚═════╝░░╚════╝░╚═╝╚═╝    ╚═════╝░╚═╝░░░░░╚═╝╚═╝╚══════╝╚══════╝╚═════╝░
                                                                                              \|||/
    <b>ASCII Smiles NFT mint page</b>                                                                (o o)
-------------------------------------------------------------------------------------------ooO-(_)-Ooo--------

</pre>
<div>
<B>ASCII Smiles NFT</B> is the multi-blockchain on-chain collection. The Ethereum blockchain in great,
but decentralization is the king. So we have our collection on <B>12 most popular blokchains.</B><BR>
You will be able to mint a new <B>ASCII Smile NFT</B> using your Metamask wallet.<BR>
<BR>
The public phase is available for <B>everyone</B> (maximum of five (5) NFT’s per transaction and a
limit of ten (10) NFT’s per wallet).<BR>
<BR>
The supply of ASCII Smiles NFTs on every blockchain is 1000 items. Total supply will be 12 * 1000 = 12 000 NFTs.<BR>
We have reserved <B>50</B> NFTs for <B>giveaways</B> on every blockchain (600 total). It will be distributed between
early supporters, contest winners and post-sale giveaway winners.<BR><BR>
</div>
<DIV id="blockchains">
    <B>ASCII Smiles NFT is deployed to following blockchains (click to add/switch).</B><BR><BR>
    <SPAN id="chain1">[Ethereum]</SPAN>
    <SPAN id="chain56">[Binance]</SPAN>
    <SPAN id="chain43114">[Avalanche]</SPAN>
    <SPAN id="chain250">[Fantom]</SPAN>
    <SPAN id="chain137">[Polygon]</SPAN><BR><BR>
    <SPAN id="chain128">[Huobi&nbsp;ECO]</SPAN>
    <SPAN id="chain66">[OKExChain]</SPAN>
    <SPAN id="chain42220">[Celo]</SPAN>
    <SPAN id="chain1666600000">[Harmony]</SPAN>
    <SPAN id="chain1285">[Moonriver]</SPAN>
    <SPAN id="chain25">[Cronos]</SPAN>
    <SPAN id="chain1313161554">[Aurora]</SPAN><BR><BR>
    <span id="chainWrong">Connected blockchain is not supported</span>
</DIV>
<DIV id="divConnect">
    <button id="webConnect" class="AsciiButton">[ Connect to Web3 wallet (MetaMask) ]</button>
</DIV>
<DIV id="mintInfo">
    You connected as : <B><span id="myAddress"></span></B><BR>
    Balance: <B id="myBalance">0.00 ETH</B><BR>
    Gas Price: ~<B id="ETHGas">0.00 gwei</B><BR><BR>
    Public Mint start time: <B>30 October, 21:00 GMT</B><BR><BR>
    You have: <B><span id="myNFTBal">0</span></B> ASCII Smiles NFTs.<BR>
    You can mint: <B><span id="myLimit">10</span></B> ASCII Smiles NFTs. (limit 10 per wallet)<BR>

    <DIV id="Mint">
        <DIV style="text-align: center"><B>Public Sale:</B></DIV><BR>
        Price: <B>Free-to-mint</B><BR>
        Gas Fee (for one): ~<B id="gasMint">0.00 ETH</B><BR>
        You can mint max: <B><Span id="mint_max">0</Span></B> ASCII Smiles NFTs.<BR>
        Minted: <Span id="minted_count">0/1000</Span>
        <BR><BR>* Enter count of <B>ASCII Smiles NFT</B> you want to mint.<BR>
        * Push the "<B>MINT</B>" button.<BR><BR>
        <DIV class="mintW">
            <label for="MintNum">Count: </label><input class="numField" id="MintNum" type="number" min="1" max="5" step="1" value="1"> <label for="Donate">Donate: </label><input class="numField" id="Donate" type="number" value="0" min="0" max="1000" step="0.0001"> <span id="donateToken">ETH</span><sup>*</sup> <input class="AsciiButton" id="MintB" type="submit" value="[ MINT ]"><BR><BR>
            <DIV id="MintStatus"></DIV>
        </DIV>
        <DIV><BR>* You can donate any value to the project. This money will be used for future development and <B>50%</B> will be added to the Community fund.</DIV>
    </DIV>
</div>
<DIV>
<pre>
_,.-'~'-.,__,.-'~'-.,__,.-'~'-.,__,.-'~'-.,__,.-'~'-.,__,.-'~'-.,__,.-'~'-.,__,.-'~'-.,__,.-'~'-.,__,.-'~'-.,_

    ░█─── ▀█▀ ░█▄─░█ ░█─▄▀ ░█▀▀▀█
    ░█─── ░█─ ░█░█░█ ░█▀▄─ ─▀▀▀▄▄
    ░█▄▄█ ▄█▄ ░█──▀█ ░█─░█ ░█▄▄▄█

_,.-'~'-.,__,.-'~'-.,__,.-'~'-.,__,.-'~'-.,__,.-'~'-.,__,.-'~'-.,__,.-'~'-.,__,.-'~'-.,__,.-'~'-.,__,.-'~'-.,_

</pre>
    <DIV>
<PRE>
    <A href="https://discord.gg/ngNVt2R2s2">[ DISCORD ]</A> <A href="https://twitter.com/AsciiSmiles">[ Twitter ]</A>

    [ NFT: <B>0x0A5C1108D016b2486433cd838450c9ef932e03d5</B> ] [ Token: <B>0xaAAaaAaaA12c8d5501D3AEfd29C1969a3270DD38</B> ]

    <A target="_blank" href="https://opensea.io/collection/ascii-smiles-nft">[ OpenSea collection ]</A>    Listed on <A href="https://nftcalendar.io/event/ascii-smiles-nft/">[ NFT Calendar ]</A>
</PRE>
    </DIV>
</DIV>
<div>
<pre>

----------------8&lt;-------------8&lt;---------------[ cut here ]--------------8&lt;-----------------------8&lt;---------

          &lt;3 This website is hosted on the IPFS distributed network. No central server involved. &lt;3
   ____    ____   ___ ____  _       _    __    ___  _____ _____     __           _ _
  / __ \  |___ \ / _ \___ \/ |     /_\  / _\  / __\ \_   \\_   \   / _\_ __ ___ (_) | ___  ___
 / / _` |   __) | | | |__) | |    //_\\ \ \  / /     / /\/ / /\/   \ \| '_ ` _ \| | |/ _ \/ __|
| | (_  |  / __/| |_| / __/| |   /  _  \_\ \/ /___/\/ /_/\/ /_     _\ \ | | | | | | |  __/\__ \
 \ \__,_| |_____|\___/_____|_|   \_/ \_/\__/\____/\____/\____/     \__/_| |_| |_|_|_|\___||___/

        NO cookies or any web analytics used! :-P
</pre>
</div>
<SCRIPT>
    let provider;
    let signer;
    const NFTAddress = "0x0A5c1108d016b2486433cD838450c9ef932e03d5";
    let myAddress = '';
    let coinTickers = {
        1 : "ETH",
        56 : "BNB",
        43114 : "AVAX",
        250 : "FTM",
        137 : "MATIC",
        128 : "HT",
        66 : "OKT",
        42220 : "CELO",
        25 : "CRO",
        1666600000 : "ONE",
        1285 : "MOVR",
        1313161554 : "ETH"
    };
    let coinTicker = '';
    const NFTAbi = [
        // Get the account balance
        "function totalSupply() public view returns(uint256)",
        "function maxSupply() public view returns(uint16)",
        "function giveaway_reserved() public view returns(uint16)",
        "function pre_mint_reserved() public view returns(uint16)",
        "function mint_active() public view returns(bool)",
        "function pre_mint_paused() public view returns(bool)",

        "function balanceOf(address) view returns (uint)",
        "function mintASCIISmiles(uint256 num) public payable",
        "function preMint(bytes32[] calldata merkleProof, uint16 num) public payable",
        // An event triggered whenever anyone transfers to someone else
        "event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)"
    ];
    let NFTContract;

    document.addEventListener("DOMContentLoaded", function(event) {
        if (typeof window.ethereum !== "undefined") {
            provider = new ethers.providers.Web3Provider(window.ethereum, "any");
            provider.on("network", (newNetwork, oldNetwork) => {
                if (oldNetwork) {
                    window.location.reload();
                }
            });
            window.ethereum.autoRefreshOnNetworkChange = false;
            signer = provider.getSigner();
            try {
                signer.getAddress().then((result) => {
                    myAddress = result;
                    window.ethereum.on('accountsChanged', function (accounts) {
                        window.location.reload();
                    });
                    ShowMintData();
                    setInterval(ShowMintData, 10000);
                });
            } catch (e) {
                console.log(e);
            }
        } else {
            document.getElementById('webConnect').disabled = false;
            alert('Not found Web3 compatible Ethereum wallet.');
        }

        document.getElementById('webConnect').addEventListener('click', ConnectEther);
        document.getElementById('blockchains').addEventListener('click', SwitchNetwork);

    });

    async function ConnectEther() {
        if (typeof window.ethereum !== "undefined") {
            document.getElementById('webConnect').disabled = true;
            try {
                myAddress = await provider.send("eth_requestAccounts", []);
                myAddress = myAddress[0];
                window.ethereum.on('accountsChanged', function (accounts) {
                    window.location.reload();
                });
                ShowMintData();
                setInterval(ShowMintData, 10000);
            } catch (e) {
                document.getElementById('webConnect').disabled = false;
                alert("Can not connect to Web3 wallet (MetaMask)");
            }
        } else {
            document.getElementById('webConnect').disabled = false;
            alert('Not found Web3 compatible Ethereum wallet.');
        }
    }

    async function ShowMintData() {
        let chainId = await provider.getNetwork();
        let divChain =  document.getElementById('chain' + chainId.chainId);
        if(divChain) {
            divChain.className = 'active';
            coinTicker = coinTickers[chainId.chainId];
        } else {
            document.getElementById('mintInfo').style.display='none';
            document.getElementById('chainWrong').style.display='block';
            return;
        }
        //            document.getElementById('mintInfo').style.display = 'none';
//            alert('Please connect to Ethereum Mainnet');
//            return ;
        NFTContract = new ethers.Contract(NFTAddress, NFTAbi, provider);
        document.getElementById('divConnect').style.display = 'none';
        document.getElementById('mintInfo').style.display = 'block';
        document.getElementById('myAddress').innerHTML = myAddress;
        let EthBalance = await provider.getBalance(myAddress);
        document.getElementById('myBalance').innerHTML = ethers.utils.formatEther(EthBalance) + ' ' + coinTicker;
        let gPrice = await provider.getGasPrice();
        gPrice = gPrice/1000000000;
        document.getElementById('ETHGas').innerHTML = gPrice.toFixed(1) + ' gwei';
        let myBalance = await NFTContract.balanceOf(myAddress);
        let feeAmount = 0.0105 * gPrice / 100;
        let ETHFee = ethers.utils.parseUnits(feeAmount.toFixed(4), "ether");
        document.getElementById('myNFTBal').innerHTML = myBalance;
        document.getElementById('myLimit').innerHTML = 10 - myBalance;
        if(await NFTContract.mint_active() === true) {
            document.getElementById('Mint').style.display = 'block';
            let supply = await NFTContract.totalSupply();
            let total = await NFTContract.maxSupply();
            let giveLeft = await NFTContract.giveaway_reserved();
            let left = total - giveLeft - supply;
            if(left <= 0) {
                mintFinished();
            } else {
                document.getElementById('minted_count').innerHTML = supply.toString() + '/' + total.toString();
                document.getElementById('gasMint').innerHTML = ethers.utils.formatEther(ETHFee) + ' ' + coinTicker;
                let canMint = Math.min(5, left, 10 - myBalance, Math.floor(EthBalance / (ETHFee * 1))).toFixed(0);
                document.getElementById('mint_max').innerHTML = canMint;
                document.getElementById('donateToken').innerHTML = coinTicker;
                document.getElementById('MintNum').max = canMint;
                document.getElementById('MintB').addEventListener('click', mintNFTs);
            }
        } else {
            mintFinished();
        }
    }

    function mintFinished() {
        document.getElementById('Mint').innerHTML = 'The minting is finished. Thank you for your support!';
    }

    async function mintNFTs() {
        let num = document.getElementById('MintNum').value;
        let donation = ethers.utils.parseEther(document.getElementById('Donate').value);
        const NFTWithSigner = NFTContract.connect(signer);
        try {
            const tx = await NFTWithSigner.mintASCIISmiles(num, {value: donation});

            const receipt = await tx.wait();
            if(receipt.status === 1) {
                document.getElementById('MintStatus').innerHTML = '<B>Your ASCII Smiles NFTs minted sucessfully!</B>';
            }
        } catch (e) {
            document.getElementById('MintStatus').innerHTML = '<I>Error: '+e.message+'</I>';
        }
    }
    const toHex = (num) => {
        return '0x'+num.toString(16)
    };

    async function SwitchNetwork(evt) {
        if(evt.target.id === 'blockchains') return;
        let chainId = await provider.getNetwork();
        let clickChain = evt.target.id.substring(5);
        if(chainId.chainId === parseInt(clickChain))
            return;
        let chainsData = {
            '1' : {
                chainId: toHex(1),
                chainName: "Ethereum Mainnet",
                nativeCurrency: {
                    name: "Ether",
                    symbol: "ETH",
                    decimals: 18
                },
                rpcUrls: [
                    "https://api.mycryptoapi.com/eth",
                    "https://cloudflare-eth.com"
                ],
                blockExplorerUrls: ["https://etherscan.io"]
            }, '56' : {
                chainId: toHex(56),
                chainName: "Binance Smart Chain Mainnet",
                nativeCurrency: {
                    name: "BNB",
                    symbol: "BNB",
                    decimals: 18
                },
                rpcUrls: ["https://bsc-dataseed1.binance.org"],
                blockExplorerUrls: ["https://bscscan.com"]
            }, '43114' : {
                chainId: toHex(43114),
                chainName: "Avalanche Mainnet",
                nativeCurrency: {
                    name: "Avalanche",
                    symbol: "AVAX",
                    decimals: 18
                },
                rpcUrls: ["https://api.avax.network/ext/bc/C/rpc"],
                blockExplorerUrls: ["https://snowtrace.io/"]
            }, '250' : {
                chainId: toHex(250),
                chainName: "Fantom Opera",
                nativeCurrency: {
                    name: "Fantom",
                    symbol: "FTM",
                    decimals: 18
                },
                rpcUrls: ["https://rpc.ftm.tools"],
                blockExplorerUrls: ["https://ftmscan.com"]
            }, '137' : {
                chainId: toHex(137),
                chainName: "Polygon Mainnet",
                nativeCurrency: {
                    name: "MATIC",
                    symbol: "MATIC",
                    decimals: 18
                },
                rpcUrls: ["https://polygon-rpc.com/"],
                blockExplorerUrls: ["https://polygonscan.com/"]
            }, '128' : {
                chainId: toHex(128),
                chainName: "Huobi ECO Chain Mainnet",
                nativeCurrency: {
                    name: "Huobi Coin",
                    symbol: "HT",
                    decimals: 18
                },
                rpcUrls: ["https://http-mainnet.hecochain.com"],
                blockExplorerUrls: ["https://hecoinfo.com"]
            }, '66' : {
                chainId: toHex(66),
                chainName: "OKExChain Mainnet",
                nativeCurrency: {
                    name: "OKExChain Global Utility Token",
                    symbol: "OKT",
                    decimals: 18
                },
                rpcUrls: ["https://exchainrpc.okex.org"],
                blockExplorerUrls: ["https://www.oklink.com/okexchain"]
            }, '42220' : {
                chainId: toHex(42220),
                chainName: "Celo Mainnet",
                nativeCurrency: {
                    name: "CELO",
                    symbol: "CELO",
                    decimals: 18
                },
                rpcUrls: ["https://forno.celo.org"],
                blockExplorerUrls: ["https://explorer.celo.org"]
            }, '25' : {
                chainId: toHex(25),
                chainName: "Cronos Mainnet Beta",
                nativeCurrency: {
                    name: "Crypto.org Coin",
                    symbol: "CRO",
                    decimals: 18
                },
                rpcUrls: ["https://evm-cronos.crypto.org"],
                blockExplorerUrls: ["https://cronos.crypto.org/explorer"]
            }, '1666600000' : {
                chainId: toHex(1666600000),
                chainName: "Harmony Mainnet Shard 0",
                nativeCurrency: {
                    name: "ONE",
                    symbol: "ONE",
                    decimals: 18
                },
                rpcUrls: ["https://api.harmony.one"],
                blockExplorerUrls: ["https://explorer.harmony.one"]
            }, '1285' : {
                chainId: toHex(1285),
                chainName: "Moonriver",
                nativeCurrency: {
                    name: "Moonriver",
                    symbol: "MOVR",
                    decimals: 18
                },
                rpcUrls: ["https://rpc.moonriver.moonbeam.network"],
                blockExplorerUrls: ["https://blockscout.moonriver.moonbeam.network"]
            }, '1313161554' : {
                chainId: toHex(1313161554),
                chainName: "Aurora MainNet",
                nativeCurrency: {
                    name: "Ether",
                    symbol: "ETH",
                    decimals: 18
                },
                rpcUrls: ["https://mainnet.aurora.dev"],
                blockExplorerUrls: ["https://explorer.mainnet.aurora.dev/"]
            }
        };

        if (typeof window.ethereum === "undefined") {
            console.info("MetaMask isn't installed!");
            return;
        }
        try {
            await provider.send('wallet_switchEthereumChain',
                [{ chainId: toHex(parseInt(clickChain)) }]
            );
        } catch (switchError) {
            if(typeof switchError === "string") {
                alert('Your wallet do not support network switch. Switch network manually if possible.');
                return;
            }
            await provider.send('wallet_addEthereumChain',
                [chainsData[clickChain]]
            );
        }
    }
</SCRIPT>
</body>